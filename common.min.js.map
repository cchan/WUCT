{"version":3,"sources":["common.js"],"names":["window","dClass","dTitle","numPacketsDict","easy","medium","hard","numPackets","map","x","scoreValues","location","hostname","dbName","URLSearchParams","search","get","port","Error","console","log","scoresPerQuestion","getScore","scores","totalScore","i","length","a","n","packetScore","reduce","b","getProgress","progress","findIndex","fbconfig","apiKey","authDomain","databaseURL","storageBucket","messagingSenderId","setTimer","el","cb","timerlength","currentTarget","fb","child","on","snapshot","val","target","setInterval","total","Math","floor","Date","getTime","hours","minutes","seconds","innerHTML","alertSuccess","text","persistent","$","hide","fadeTo","slideUp","alertFailure","firebase","initializeApp","database","ref","append","connectedRef","snap","s","o","g","r","m","q","push","arguments","l","createElement","getElementsByTagName","async","src","parentNode","insertBefore","document","ga"],"mappings":"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","file":"common.min.js","sourcesContent":["// note the the number of difficulty classes is fixed at 3, for now\nwindow.dClass = [\"easy\", \"medium\", \"hard\"];\nwindow.dTitle = [\"Easy\", \"Med\", \"Packet\"];\nwindow.numPacketsDict = {\"easy\": 0, \"medium\": 0, \"hard\": 12};\nwindow.numPackets = window.dClass.map(x=>window.numPacketsDict[x]);\nwindow.scoreValues = [1, 3, 7];\n\nif(window.location.hostname == 'lmt.clive.io')\n  window.dbName = new URLSearchParams(window.location.search).get(\"db\") || 'lmtS21';\nelse if (window.location.hostname == 'localhost' && window.location.port == 8849)\n  window.dbName = new URLSearchParams(window.location.search).get(\"db\") || 'lmtS21';\nelse\n  throw new Error();\nconsole.log(window.dbName);\n\nwindow.scoresPerQuestion = [\n  [3, 3, 3],\n  [3, 3, 3],\n  [4, 4, 4],\n  [4, 4, 4],\n  [5, 5, 5],\n  [6, 6, 6],\n  [7, 7, 7],\n  [8, 8, 8],\n  [9, 9, 9],\n  [10, 10, 10],\n  [11, 11, 11],\n  [13, 13, 20],\n];\n\nwindow.getScore = function(scores){\n  var totalScore = 0;\n  for(var i = 0; i < window.dClass.length; i++)\n    totalScore += (scores[window.dClass[i]] || scores[i] || []).map(function(a, n){\n      var packetScore = 0;\n      if(a < 0)\n        return 0;\n      if(a & 1)\n        packetScore += window.scoresPerQuestion[n][0];\n      if(a & 2)\n        packetScore += window.scoresPerQuestion[n][1];\n      if(a & 4)\n        packetScore += window.scoresPerQuestion[n][2];\n      return packetScore;\n    }).reduce(function(a,b){return a+b;}, 0);\n  return totalScore;\n}\nwindow.getProgress = function(scores){\n  var progress = [];\n  for(var i = 0; i < window.dClass.length; i++){\n    progress[i] = scores[window.dClass[i]] ? scores[window.dClass[i]].findIndex(a => a == -1) : 0; // Number they finished\n    if(progress[i] == -1)\n      progress[i] = scores[window.dClass[i]].length;\n    progress[i] /= numPackets[i];\n  }\n  return progress;\n}\n\n// Initialize Firebase\nvar fbconfig = {\n  apiKey: \"AIzaSyC4siYV0A1Nq4POMUfvdRKyP0-xzUUvMVo\",\n  authDomain: \"wuct-1f4ca.firebaseapp.com\",\n  databaseURL: \"https://wuct-1f4ca.firebaseio.com\",\n  storageBucket: \"wuct-1f4ca.appspot.com\",\n  messagingSenderId: \"833633709327\"\n};\nfirebase.initializeApp(fbconfig);\nwindow.fb = firebase.database().ref(window.dbName);\n\n//Don't use this during leap seconds btw.\nfunction setTimer(el, cb){\n  var timerlength, currentTarget = 0;\n  fb.child('timer').on('value', function(snapshot){\n    if(snapshot.val()){\n      currentTarget = snapshot.val().target;\n      timerlength = snapshot.val().timerlength;\n    }\n  });\n  return setInterval(function(){\n    var total = Math.floor((currentTarget - (new Date()).getTime())/1000);\n    if(cb)\n      cb(total);\n    if(total > timerlength * 60)\n      total = timerlength * 60;\n    if(total < 0)\n      total = 0;\n    var hours = \"\" + Math.floor(total/3600);\n    var minutes = \"\" + Math.floor(total/60) % 60;\n    var seconds = \"\" + total % 60;\n    el.innerHTML = ((hours<10)?\"0\":\"\") + hours + \":\" + ((minutes<10)?\"0\":\"\") + minutes + \":\" + ((seconds<10)?\"0\":\"\") + seconds;\n  }, 500);\n}\n\n\nfunction alertSuccess(text, persistent) {\n    $(\"#success-alert\").hide();\n    $(\"#failure-alert\").hide();\n    $(\"#success-alert\").text(text).fadeTo(2000, 500);\n    if(!persistent)\n      $(\"#success-alert\").slideUp(500, function(){\n         $(\"#success-alert\").slideUp(3000);\n      });\n}\nfunction alertFailure(text, persistent) {\n    $(\"#success-alert\").hide();\n    $(\"#failure-alert\").hide();\n    $(\"#failure-alert\").text(text).fadeTo(2000, 500);\n    if(!persistent)\n      $(\"#failure-alert\").slideUp(500, function(){\n         $(\"#failure-alert\").slideUp(3000);\n      });\n}\n$(function(){\n  $('body').append(`<div class=\"alerts\" style=\"position: fixed; top: 4em; left: 1em; right: 1em; height: 4em; pointer-events: none;\">\n    <div class=\"alert alert-success\" id=\"success-alert\" style=\"position:absolute; width: 15em; right: 1em; text-align: center;\"></div>\n    <div class=\"alert alert-danger\" id=\"failure-alert\" style=\"position:absolute; width: 15em; right: 1em; text-align: center;\"></div>\n  </div>`);\n  $(\"#success-alert\").hide();\n  $(\"#failure-alert\").hide();\n});\n\nvar connectedRef = firebase.database().ref(\".info/connected\");\nconnectedRef.on(\"value\", function(snap) {\n  if (snap.val() === true) {\n    alertSuccess(\"connected\");\n  } else {\n    alertFailure(\"not connected\", true);\n  }\n});\n\n\n(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){\n(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),\nm=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)\n})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');\n\nga('create', 'UA-62605323-4', 'auto');\nga('send', 'pageview');\n\n"]}