<html>
<head>
  <script src="https://www.gstatic.com/firebasejs/3.6.9/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/3.6.9/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/3.6.9/firebase-database.js"></script>
  <script src="https://www.gstatic.com/firebasejs/3.6.9/firebase-messaging.js"></script>
  <script src="https://www.gstatic.com/firebasejs/3.6.9/firebase.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/js-cookie/2.2.0/js.cookie.min.js"></script>
  <script src="common.js?1523684046066"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.0.0-alpha.3/css/bootstrap.min.css" crossorigin="anonymous" />
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />
  <link rel="stylesheet" href="main.css?1523684046066" />
</head>
<body>
  <div id="app">
    <header>
      <h1><img src="wuct.jpg" alt="WUCT" />Breaking Bonds Round: Scoring</h1>
    </header>
    <input type="password" id="password" />
    <input type="submit" id="passsubmit" value="Log In" />
  </div>

  <script src="bundle.js?1523684046066"></script>
  <script>
    window.cancelAuthStateChanged = false;
    window.signOut = function(){
      window.cancelAuthStateChanged = true;
      firebase.auth().signOut();
      window.location.reload();
    }
    firebase.auth().onAuthStateChanged(function(user){
      if(window.cancelAuthStateChanged)
        return;
      
      if (user) {
        if(user.email != 'wuct@clive.io')
          window.signOut();
        else
          window.render();
      }
    });
    document.getElementById('password').onkeypress = function(e){
      if(e.keyCode == 13)
        document.getElementById('passsubmit').click();
    }
    document.getElementById('passsubmit').onclick = function(e){
      var password = document.getElementById('password').value;
      if(!password)
        document.getElementById('app').innerHTML = 'failed to sign in';
      else
        firebase.auth().signInWithEmailAndPassword('wuct@clive.io', password).then(window.render).catch(function(error){
          document.getElementById('app').innerHTML = 'failed to sign in';
        });
      e.preventDefault();
      return false;
    };
  </script>
</body>
</html>
